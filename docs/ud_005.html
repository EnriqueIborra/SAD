<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=0.5, user-scalable=yes">
  <meta name="description" content="Unidad Did√°ctica 5 sobre proxy.">

  <link rel="stylesheet" href="https://cdn.hugeicons.com/font/hgi-stroke-rounded.css" />
  
  <!--   <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="icon" href="imgs/favicon.png" type="image/png">  uso de favicon-->

  <title>UD5 - Proxy</title>
  <link rel="stylesheet" href="estilsunitats.css">

</head>
<body>
   <!--<button class="theme-toggle" onclick="toggleTheme()"></button> -->
  <button class="theme-toggle" onclick="toggleTheme()">
    <i class="hgi hgi-stroke hgi-sun-01" id="theme-icon"></i>
  </button>
  <!-- boto menu hamburguesa  +  javascript -->
  <button class="hamburger" onclick="toggleMenu()" aria-label="Abrir men√∫ de navegaci√≥n">
    <span id="menu-icon">‚ò∞</span>
  </button>
  
  <div class="sidebar">
    <a href="#tipos">Tipos de Proxys</a>
    <a href="#instala">Instalaci√≥n de proxy cach√©</a>
    <a href="#autentica">M√©todos de autenticaci√≥n</a>
    <a href="#transparente">Proxy transparente</a>
    <a href="#web">Proxy web</a>    
    <a href="#inverso">Proxy inverso</a>    
    <a href="#problemas">Solucion de problemas</a>
    <a href="#herramientas">Herramientas graficas</a>
    <a href="#documentacion">Documentaci√≥n</a>

    <a href="#conflog">Configuraci√≥n de Logs</a>    
    <a href="#analisislog">Analisis de Logs</a>
  </div>


  <div style="width: 100%;">
    <header>
      <a href="index.html"><img src="imgs/sad5.png" alt="SAD" ></a>
      <h1>Unidad Did√°ctica 5: Proxy</h1>
      <h1>.</h1>
    </header>
    
    <main>
      
    <section id="tipos">
      
        <h2 >üåê Tipos de Proxy, Caracter√≠sticas y Funciones</h2>
      
        <p>Un <strong>proxy</strong> es un intermediario entre un cliente (como un navegador web) y el servidor al que quiere acceder. Sirve para enrutar, filtrar, ocultar, registrar o modificar el tr√°fico de red seg√∫n el tipo de proxy y su configuraci√≥n.</p>
      
        <h3 > Funciones principales de un proxy</h3>
        <ul>
          <li><strong>Ocultaci√≥n de identidad</strong>: El servidor remoto no ve la IP real del cliente, sino la del proxy.</li>
          <li><strong>Control de acceso</strong>: Permite aplicar pol√≠ticas de uso de internet (por usuarios, IPs, horarios‚Ä¶).</li>
          <li><strong>Filtrado de contenido</strong>: Puede bloquear webs, tipos de archivos o categor√≠as de contenido.</li>
          <li><strong>Cach√©</strong>: Guarda copias locales de p√°ginas visitadas frecuentemente para acelerar el acceso.</li>
          <li><strong>Registro y monitoreo</strong>: Registra todo el tr√°fico que pasa por √©l (qui√©n accede, cu√°ndo y a qu√©).</li>
          <li><strong>Anonimato</strong>: Algunos proxies est√°n dise√±ados para ocultar por completo la identidad del usuario.</li>
        </ul>
      
        <h3 > Tipos de Proxy</h3>
      
        <h3>1. Proxy directo o normal (forward proxy)</h3>
        <p>El cliente se conecta directamente al proxy, que a su vez hace las peticiones al servidor final.
        Se usa para controlar el acceso a internet desde una red interna.</p>
        <p><strong>Ejemplo:</strong> Una empresa usa un proxy para filtrar contenido web y registrar navegaci√≥n de empleados.</p>
      
        <h3>2. Proxy inverso (reverse proxy)</h3>
        <p>El cliente no sabe que hay un proxy. El proxy est√° delante de uno o varios servidores web.
        Sirve para equilibrar carga, acelerar respuestas, a√±adir seguridad y ocultar estructura interna.</p>
        <p><strong>Ejemplo:</strong> Nginx o HAProxy funcionando como reverse proxy para varios servidores web.</p>
      
        <h3>3. Proxy transparente</h3>
        <p>No requiere configuraci√≥n del cliente. El tr√°fico se redirige autom√°ticamente al proxy.
        Se usa para aplicar pol√≠ticas sin que el usuario lo note.</p>
        <p><strong>Ejemplo:</strong> Un proxy en una escuela que filtra contenido sin necesidad de configurar los navegadores.</p>
      
        <h3>4. Proxy an√≥nimo</h3>
        <p>Oculta la IP del cliente, pero puede identificarse como proxy al servidor remoto.</p>
      
        <h3>5. Proxy de alto anonimato (elite)</h3>
        <p>No revela que es un proxy, ni la IP del cliente. Ideal para navegaci√≥n an√≥nima.</p>
      
        <h3>6. Proxy SOCKS</h3>
        <p>No interpreta el tr√°fico, solo lo enruta (nivel m√°s bajo que HTTP).
        √ötil para torrents, juegos online, apps que no usan HTTP.</p>
      
        <h3>7. Proxy HTTP/HTTPS</h3>
        <p>Dise√±ado espec√≠ficamente para manejar tr√°fico web.
        Puede hacer inspecci√≥n de contenido, filtrado por URL, cach√©, etc.</p>
      
        <h3 >üìå Caracter√≠sticas generales</h3>
        <ul>
          <li> Puede aumentar la <strong>seguridad</strong>, pero tambi√©n introducir riesgos si est√° mal configurado.</li>
          <li> Necesita mantenimiento: actualizaciones, revisi√≥n de logs, ajustes de rendimiento.</li>
          <li> Ayuda a <strong>mejorar rendimiento</strong> cuando se usa cach√© y balanceo de carga.</li>
          <li> Proporciona <strong>visibilidad</strong> del tr√°fico: ideal para auditor√≠a y monitoreo.</li>
        </ul>
      
    </section>



    <section id="instala">
     
        <h2 >üõ†Ô∏è C√≥mo instalar un Proxy-Cache con Squid (en Linux)</h2>
      
        <p>Un <strong>proxy-cache</strong> permite almacenar en cach√© (temporalmente) contenido web para acelerar el acceso a sitios web frecuentemente visitados y reducir el uso de ancho de banda. <strong>Squid</strong> es uno de los software m√°s usados para esto.</p>
      
        <h3 >üîß Requisitos previos</h3>
        <ul>
          <li>Un servidor con Linux (Debian, Ubuntu, CentOS, etc.).</li>
          <li>Acceso como superusuario (root o sudo).</li>
          <li>Conexi√≥n a Internet.</li>
        </ul>
      
        <h3 >üì¶ 1. Instalar Squid</h3>
        <h3>En Debian/Ubuntu:</h3>
        <pre><code>sudo apt update
sudo apt install squid -y</code></pre>
      
        <h3>En CentOS/RHEL:</h3>
        <pre><code>sudo yum install squid -y</code></pre>
      
        <h3 >‚öôÔ∏è 2. Configurar Squid</h3>
        <p>El archivo principal de configuraci√≥n est√° en:</p>
        <pre><code>/etc/squid/squid.conf</code></pre>
      
        <h3>Cambios b√°sicos recomendados:</h3>
        <ul>
          <li><strong>Cambiar el puerto del proxy (opcional):</strong>
            <pre><code>http_port 3128</code></pre>
          </li>
          <li><strong>Definir red de acceso permitida (ejemplo para 192.168.1.0/24):</strong>
            <pre><code>
acl red_local src 192.168.1.0/24
http_access allow red_local</code></pre>
          </li>
          <li><strong>Activar la cach√©:</strong>
            <pre><code>cache_dir ufs /var/spool/squid 100 16 256</code></pre>
          </li>
        </ul>
      
        <h3 >üìÅ 3. Inicializar directorios de cach√©</h3>
        <pre><code>sudo squid -z</code></pre>
      
        <h3 >‚ñ∂Ô∏è 4. Iniciar y habilitar el servicio</h3>
        <pre><code>sudo systemctl start squid
sudo systemctl enable squid</code></pre>
      
        <h3 >üîç 5. Verificar funcionamiento</h3>
        <ul>
          <li>Probar desde un navegador configurando el proxy a la IP del servidor y puerto 3128.</li>
          <li>Comprobar logs:
            <pre><code>tail -f /var/log/squid/access.log</code></pre>
          </li>
        </ul>
      
        <h3 >üß† Opciones √∫tiles</h3>
        <ul>
          <li><strong>cache_mem</strong>: Memoria RAM reservada para cach√©.
            <pre><code>cache_mem 256 MB</code></pre>
          </li>
          <li><strong>maximum_object_size</strong>: Tama√±o m√°ximo de archivo en cach√©.
            <pre><code>maximum_object_size 4096 KB</code></pre>
          </li>
          <li><strong>cache_log / access_log</strong>: Archivos donde se registran errores y accesos.</li>
        </ul>
      
        <h3 >üßº Para borrar la cach√© manualmente</h3>
        <pre><code>sudo systemctl stop squid
sudo rm -rf /var/spool/squid/*
sudo squid -z
sudo systemctl start squid</code></pre>

    </section>



    <section id="autentica">
        <h2 >üîê Autenticaci√≥n en Proxys</h2>
      
        <p>La <strong>autenticaci√≥n en un proxy</strong> consiste en requerir que el usuario proporcione credenciales (usuario y contrase√±a) antes de permitir el acceso a Internet o ciertos recursos.</p>
      
        <h3 > ¬øPor qu√© usar autenticaci√≥n en un proxy?</h3>
        <ul>
          <li> Restringir el acceso solo a usuarios autorizados.</li>
          <li> Aplicar pol√≠ticas personalizadas por usuario o grupo.</li>
          <li> Obtener registros de navegaci√≥n por persona.</li>
          <li> Aumentar la seguridad y evitar el uso no controlado.</li>
        </ul>
      
        <h3 > M√©todos de autenticaci√≥n comunes</h3>
      
        <h3>1. B√°sica (Basic Authentication)</h3>
        <p>El navegador pide usuario y contrase√±a. Se transmite en base64, por lo que se recomienda usar HTTPS.</p>
      
        <h3>2. Digest Authentication</h3>
        <p>Usa hash, m√°s segura que la b√°sica. Menos compatibilidad.</p>
      
        <h3>3. NTLM / Kerberos (SSO)</h3>
        <p>Autenticaci√≥n integrada con Windows/Active Directory. No requiere credenciales visibles.</p>
      
        <h3>4. LDAP</h3>
        <p>Basada en directorios como OpenLDAP o Active Directory.</p>
      
        <h3>5. Autenticaci√≥n externa personalizada</h3>
        <p>Validaci√≥n con scripts, bases de datos o APIs propias.</p>
      
        <h3 >üß™ Ejemplo: Autenticaci√≥n b√°sica con Squid</h3>
        <ol>
          <li><strong>Crear archivo de usuarios:</strong>
            <pre><code>sudo apt install apache2-utils
      sudo htpasswd -c /etc/squid/usuarios_proxy usuario1</code></pre>
          </li>
          <li><strong>Editar squid.conf:</strong>
            <pre><code>auth_param basic program /usr/lib/squid/basic_ncsa_auth /etc/squid/usuarios_proxy
      auth_param basic realm Proxy Privado
      acl usuarios_autenticados proxy_auth REQUIRED
      http_access allow usuarios_autenticados</code></pre>
          </li>
          <li><strong>Reiniciar Squid:</strong>
            <pre><code>sudo systemctl restart squid</code></pre>
          </li>
        </ol>
      
        <h3 >‚ö†Ô∏è Recomendaciones</h3>
        <ul>
          <li>Usar HTTPS entre cliente y proxy si se usa autenticaci√≥n b√°sica.</li>
          <li>Limitar intentos fallidos si es posible.</li>
          <li>Registrar accesos en logs para auditor√≠a.</li>
          <li>Integrar con LDAP o AD en ambientes corporativos.</li>
        </ul>

    </section>



    <section id="transparente">
        <h2 >üßº ¬øQu√© es un Proxy Transparente?</h2>
      
        <p>Un <strong>proxy transparente</strong> es un servidor proxy que <strong>intercepta el tr√°fico de red sin necesidad de configuraci√≥n en el cliente</strong>.</p>
      
        <h3 > ¬øC√≥mo funciona?</h3>
        <ol>
          <li>El cliente solicita una p√°gina como siempre.</li>
          <li>El router/firewall redirige la petici√≥n al proxy.</li>
          <li>El proxy analiza, filtra o cachea el contenido.</li>
          <li>El proxy responde al cliente sin que este lo note.</li>
        </ol>
      
        <h3 > ¬øPor qu√© se llama ‚Äútransparente‚Äù?</h3>
        <p>Porque <strong>el cliente no necesita configurar nada</strong>. Todo se hace de forma autom√°tica.</p>
      
        <h3 >‚úÖ Ventajas</h3>
        <ul>
          <li> Sin configuraci√≥n en el cliente.</li>
          <li> Ideal para redes p√∫blicas o educativas.</li>
          <li> Control de acceso, registro y cach√© sin intervenci√≥n.</li>
          <li> Compatible con cualquier dispositivo.</li>
        </ul>
      
        <h3 >‚ùå Desventajas</h3>
        <ul>
          <li> No permite autenticaci√≥n individual f√°cilmente.</li>
          <li> Dificultades con conexiones HTTPS.</li>
          <li> M√°s dif√≠cil de monitorear por usuario.</li>
          <li> Requiere reglas avanzadas en el firewall/router.</li>
        </ul>
      
        <h3 >üõ†Ô∏è Configuraci√≥n b√°sica con Squid</h3>
        <h3>1. Activar el modo transparente en squid.conf:</h3>
        <pre><code>http_port 3128 transparent</code></pre>
      
        <h3>2. Redirigir tr√°fico HTTP con iptables:</h3>
        <pre><code>iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 3128</code></pre>
      
        <h3>3. Reiniciar Squid:</h3>
        <pre><code>sudo systemctl restart squid</code></pre>
      
        <h3 >üëÄ ¬øY el tr√°fico HTTPS?</h3>
        <p>Requiere <strong>SSL Bump</strong>, certificados instalados en los clientes y una configuraci√≥n m√°s avanzada.</p>
      

    </section>



    <section id="web">
        <h2 >üß≠ ¬øQu√© es un Proxy Web?</h2>
        <p>Un <strong>proxy web</strong> es un <strong>servidor intermedio</strong> entre tu dispositivo (navegador, app, etc.) y el sitio web o servicio que quieres visitar.</p>
      
        <h3 >‚öôÔ∏è ¬øC√≥mo Funciona?</h3>
        <ol>
          <li><strong>T√∫ haces una solicitud</strong> (por ejemplo, quieres visitar <code>example.com</code>).</li>
          <li> <strong>Tu solicitud va al servidor proxy</strong> en lugar de ir directamente a la web.</li>
          <li> <strong>El proxy reenv√≠a la solicitud</strong> al sitio web real.</li>
          <li> El sitio responde al proxy.</li>
          <li> <strong>El proxy te env√≠a la respuesta</strong> (la p√°gina web) como si viniera directamente de √©l.</li>
        </ol>
      
        <h3 > ¬øPara Qu√© Sirve un Proxy Web?</h3>
        <ul>
          <li> <strong>Privacidad</strong>: Oculta tu IP real y puede ayudarte a navegar de forma m√°s an√≥nima.</li>
          <li> <strong>Acceso a contenido restringido</strong>: Puedes saltarte bloqueos geogr√°ficos o censura.</li>
          <li> <strong>Seguridad y filtrado</strong>: Muchas empresas usan proxies para bloquear webs maliciosas o inapropiadas.</li>
          <li> <strong>Cach√© y velocidad</strong>: Algunos proxies almacenan versiones de p√°ginas ya visitadas para cargarlas m√°s r√°pido.</li>
        </ul>
      
        <h3 >üß™ Ejemplo Gr√°fico (simplificado):</h3>
        <pre >
      T√∫ (IP real)
         ‚Üì
      [ Proxy Web ] (IP visible)
         ‚Üì
      Sitio Web Destino
        </pre>

    </section>



    <section id="inverso">
        <h2>¬øQu√© es un Proxy Inverso?</h2>
        <p>Un <strong>proxy inverso</strong> es un servidor que se ubica frente a uno o m√°s servidores web, y act√∫a como intermediario para las solicitudes que llegan desde los clientes (usuarios).</p>
      
        <h3>‚öôÔ∏è ¬øC√≥mo Funciona?</h3>
        <ol>
          <li> Un usuario hace una solicitud para acceder a un sitio web (por ejemplo, <code>example.com</code>).</li>
          <li> La solicitud llega al <strong>proxy inverso</strong> en lugar de ir directamente al servidor web.</li>
          <li> El proxy inverso determina a qu√© servidor del backend debe enviar la solicitud (si hay varios).</li>
          <li> El servidor web responde al proxy inverso.</li>
          <li> El proxy inverso reenv√≠a la respuesta al usuario como si viniera directamente del servidor web.</li>
        </ol>
      
        <h3> ¬øPara Qu√© Sirve un Proxy Inverso?</h3>
        <ul>
          <li> <strong>Seguridad</strong>: Oculta la estructura interna y protege los servidores reales del acceso directo.</li>
          <li> <strong>Balanceo de carga</strong>: Distribuye las solicitudes entre varios servidores para mejorar el rendimiento.</li>
          <li> <strong>Compresi√≥n y cach√©</strong>: Almacena respuestas frecuentes para acelerar el acceso a recursos.</li>
          <li> <strong>Monitoreo</strong>: Permite controlar y registrar el tr√°fico de entrada.</li>
          <li> <strong>Descifrado SSL</strong>: Puede manejar el cifrado HTTPS para liberar carga a los servidores web reales.</li>
        </ul>
      
        <h3>üß™ Ejemplo Gr√°fico (simplificado):</h3>
        <pre>
      Usuario
         ‚Üì
      [ Proxy Inverso ]
         ‚Üì
      Servidor Web Real
        </pre>

    </section>



    <section id="problemas">
        <h2>üõ†Ô∏è Soluciones a Problemas Comunes de Clientes con Proxys</h2>
        <p>Los clientes que navegan a trav√©s de un proxy web pueden experimentar una serie de inconvenientes. A continuaci√≥n, se describen los problemas m√°s comunes y sus soluciones:</p>
        <ul>
          <li>‚ùå <strong>Acceso denegado o errores 403/407:</strong> Esto ocurre cuando el proxy requiere autenticaci√≥n o hay restricciones.</li>
          <ul>
            <li> <strong>Soluci√≥n:</strong> Verifica las credenciales de autenticaci√≥n del proxy o contacta al administrador para confirmar permisos.</li>
          </ul>
          <li>üêå <strong>Lentitud en la navegaci√≥n:</strong> Puede deberse a saturaci√≥n del proxy o configuraciones ineficientes.</li>
          <ul>
            <li> <strong>Soluci√≥n:</strong> Prueba otra configuraci√≥n de proxy, reinicia la red o verifica si hay congesti√≥n de tr√°fico.</li>
          </ul>
          <li> <strong>Problemas de cach√©:</strong> El proxy puede estar entregando contenido desactualizado almacenado en su cach√©.</li>
          <ul>
            <li> <strong>Soluci√≥n:</strong> Fuerza la recarga del contenido desde el servidor (Ctrl+F5) o solicita limpieza de cach√© al administrador del proxy.</li>
          </ul>
          <li>üîí <strong>Problemas con HTTPS o certificados:</strong> Algunos proxys no gestionan bien conexiones cifradas.</li>
          <ul>
            <li> <strong>Soluci√≥n:</strong> Usa un proxy que soporte conexiones HTTPS con certificados v√°lidos o instala el certificado del proxy en el cliente.</li>
          </ul>
            <li>üåê <strong>No se puede navegar:</strong> Puede deberse a mala configuraci√≥n del proxy en el navegador o sistema.</li>
          <ul>
            <li> <strong>Soluci√≥n:</strong> Verifica la configuraci√≥n del proxy (IP, puerto, autenticaci√≥n) y aseg√∫rate de que est√© habilitado correctamente.</li>
          </ul>
                <li> <strong>Redirecciones infinitas o bucles:</strong> A veces mal configurados, los proxys generan bucles de solicitud.</li>
          <ul>
            <li> <strong>Soluci√≥n:</strong> Corrige la l√≥gica de redirecci√≥n en la configuraci√≥n del proxy o actualiza el software.</li>
          </ul>
        </ul>
        <p>üß© Identificar correctamente el tipo de problema y su causa ayuda a aplicar la soluci√≥n adecuada.  </p>

    </section>

    <section id="herramientas">
        <h2>üîç Herramientas Gr√°ficas de Monitorizaci√≥n de Proxys</h2>
      
        <h3>üñ•Ô∏è Squid Web Proxy + Webmin / Sarg / Lightsquid</h3>
        <p><strong>Descripci√≥n:</strong> Squid es un proxy muy popular, y aunque funciona en modo consola, existen herramientas gr√°ficas como:</p>
        <ul>
          <li><strong>Webmin:</strong> interfaz web para gestionar servidores, incluyendo Squid.</li>
          <li><strong>SARG (Squid Analysis Report Generator):</strong> genera informes HTML detallados sobre uso de Squid.</li>
          <li><strong>Lightsquid:</strong> otra alternativa gr√°fica para informes visuales, con colores y gr√°ficos.</li>
        </ul>
        <p><strong>Ventajas:</strong> Gratuito, ampliamente usado, extensible.</p>
        <p><strong>Ideal para:</strong> Redes educativas o empresariales.</p>
      
        <h3>üìä Grafana + Prometheus (o Telegraf)</h3>
        <p><strong>Descripci√≥n:</strong> Grafana es un panel visual moderno que, con plugins adecuados y un recolector como Prometheus, puede mostrar estad√≠sticas de proxies y tr√°fico en tiempo real.</p>
        <p><strong>Ventajas:</strong> Muy visual, configurable, soporta alertas.</p>
        <p><strong>Ideal para:</strong> Usuarios avanzados o redes grandes.</p>
      
        <h3>üìâ Zabbix</h3>
        <p><strong>Descripci√≥n:</strong> Plataforma de monitorizaci√≥n general que tambi√©n puede observar servicios de red como proxies. Permite ver el estado, alertas, tiempo de respuesta, etc.</p>
        <p><strong>Ventajas:</strong> Escalable, interfaz gr√°fica completa, soporte de red.</p>
        <p><strong>Ideal para:</strong> Empresas y centros con m√∫ltiples servidores.</p>
      
        <h3>üß© ntopng</h3>
        <p><strong>Descripci√≥n:</strong> Monitoriza el tr√°fico de red en tiempo real, ideal si quieres ver el comportamiento del proxy en cuanto a consumo de ancho de banda, sesiones activas, etc.</p>
        <p><strong>Ventajas:</strong> Gr√°ficos en tiempo real, muy visual.</p>
        <p><strong>Ideal para:</strong> An√°lisis profundo del tr√°fico que pasa por un proxy.</p>
      
        <h3>üåê Web Proxy Sniffer Tools (como Fiddler o Charles Proxy)</h3>
        <p><strong>Descripci√≥n:</strong> Aunque se usan m√°s para depuraci√≥n, pueden monitorizar el tr√°fico HTTP/HTTPS que pasa a trav√©s de un proxy configurado.</p>
        <p><strong>Ventajas:</strong> Muy detallado, visualizaci√≥n de cabeceras, cuerpos de solicitud/respuesta.</p>
        <p><strong>Ideal para:</strong> Desarrolladores o an√°lisis puntual.</p>

    </section>

    <section id="documentacion">
        <h2>üìö Documentaci√≥n en los Proxies</h2>
      
        <p>La documentaci√≥n en los proxies se refiere al registro, an√°lisis y control de toda la actividad que pasa a trav√©s del servidor proxy. Esta documentaci√≥n es fundamental para prop√≥sitos de seguridad, auditor√≠a, control de acceso y diagn√≥stico.</p>
      
        <h3>üìù ¬øQu√© se documenta?</h3>
        <ul>
          <li> <strong>Solicitudes y respuestas HTTP/HTTPS:</strong> qu√© p√°ginas se visitan, cu√°ndo y por qui√©n.</li>
          <li> <strong>Direcciones IP de origen y destino:</strong> qui√©n hace la solicitud y hacia d√≥nde va.</li>
          <li>‚è±Ô∏è <strong>Tiempos de respuesta:</strong> medici√≥n del tiempo y estado de las conexiones.</li>
          <li>üîê <strong>Usuarios autenticados:</strong> si hay login, qui√©n accedi√≥ a qu√©.</li>
          <li> <strong>Tama√±o del contenido:</strong> datos transferidos por solicitud.</li>
        </ul>
      
        <h3>üìÇ ¬øD√≥nde se guarda esta documentaci√≥n?</h3>
        <ul>
          <li>üóÉÔ∏è <strong>Archivos de logs</strong>: guardados en texto plano por el sistema proxy.</li>
          <li>üíæ <strong>Bases de datos</strong>: para b√∫squedas y an√°lisis m√°s avanzados.</li>
          <li>üìä <strong>Herramientas de an√°lisis</strong>: como SARG o Lightsquid para generar informes.</li>
        </ul>
      
        <h3> ¬øPor qu√© es importante documentar?</h3>
        <ul>
          <li>üïµÔ∏è <strong>Seguridad:</strong> detectar accesos no autorizados.</li>
          <li>üìã <strong>Auditor√≠a:</strong> cumplir normativas legales.</li>
          <li>‚öôÔ∏è <strong>Optimizaci√≥n:</strong> mejorar rendimiento.</li>
          <li>üîß <strong>Soluci√≥n de problemas:</strong> detectar y resolver fallos.</li>
        </ul>

    </section>

    <section id="conflog">
        <h2>üõ†Ô∏è Configuraci√≥n de Logs en Squid</h2>
      
        <p>Squid permite registrar informaci√≥n detallada sobre las peticiones y el comportamiento del proxy. La configuraci√≥n de los logs se realiza principalmente en el archivo <code>squid.conf</code>.</p>
      
        <h3>üìÅ Ubicaci√≥n del archivo de configuraci√≥n</h3>
        <p>El archivo de configuraci√≥n suele encontrarse en:</p>
        <ul>
          <li>üìÑ <code>/etc/squid/squid.conf</code> (Debian/Ubuntu)</li>
          <li>üìÑ <code>/etc/squid3/squid.conf</code> (versiones antiguas)</li>
          <li>üìÑ <code>/usr/local/squid/etc/squid.conf</code> (instalaci√≥n manual)</li>
        </ul>
      
        <h3>üßæ Tipos de logs en Squid</h3>
        <ul>
          <li>üìú <strong>access.log</strong>: registro de cada solicitud HTTP.</li>
          <li>‚ö†Ô∏è <strong>cache.log</strong>: eventos del sistema y errores.</li>
          <li>üì¶ <strong>store.log</strong>: almacenamiento de objetos en cach√©.</li>
        </ul>
      
        <h3>‚öôÔ∏è Configuraci√≥n b√°sica en squid.conf</h3>
        <pre>
      # Nivel de detalle (0 a 9)
      debug_options ALL,1
      
      # Formato de logs personalizados (opcional)
      logformat customformat %ts.%03tu %6tr %&gt;A %Ss/%03Hs %&lt;st %rm %ru ...
      
      # Habilitar logs
      access_log /var/log/squid/access.log squid
      cache_log /var/log/squid/cache.log
      store_log /var/log/squid/store.log
        </pre>
      
        <h3>üîÑ Reiniciar Squid para aplicar cambios</h3>
        <ul>
          <li>‚ñ∂Ô∏è <code>sudo systemctl restart squid</code> (systemd)</li>
          <li>‚ñ∂Ô∏è <code>sudo service squid restart</code> (init.d)</li>
        </ul>
      
        <h3>üìä Herramientas para visualizar logs</h3>
        <ul>
          <li>üìà <strong>SARG</strong>: genera informes en HTML desde access.log</li>
          <li>üìä <strong>Lightsquid</strong>: alternativa visual para navegaci√≥n web</li>
          <li>üîç <strong>grep, awk, less</strong>: para an√°lisis manual en consola</li>
        </ul>
   
    </section>
     
    <section id="analisislog">
        <h2>üîç An√°lisis de Logs de Squid</h2>
      
        <p>Analizar los logs de Squid es fundamental para monitorear el tr√°fico de la red, identificar posibles problemas o detectar accesos no autorizados. Aqu√≠ te explicamos c√≥mo hacerlo usando herramientas como <code>grep</code> y <strong>SARG</strong>.</p>
      
        <h3>‚ö° An√°lisis con `grep`</h3>
        <p>El comando <code>grep</code> es una herramienta potente para buscar patrones espec√≠ficos dentro de los logs. Aqu√≠ algunos ejemplos de c√≥mo usarlo para analizar los logs de Squid.</p>
      
        <h4>üìù Ejemplos pr√°cticos con `grep`:</h4>
        <ul>
          <li>üîç <code>grep "TCP_MISS" /var/log/squid/access.log</code> - Muestra todas las solicitudes que no estaban en cach√©.</li>
          <li>üîç <code>grep "200 OK" /var/log/squid/access.log</code> - Muestra todas las solicitudes que fueron completadas con √©xito.</li>
          <li>üîç <code>grep -i "error" /var/log/squid/cache.log</code> - Busca todas las entradas que contienen la palabra "error".</li>
          <li>üîç <code>grep -E "TCP_DENIED|ERR" /var/log/squid/access.log</code> - Encuentra accesos denegados o errores en las solicitudes.</li>
          <li>üîç <code>grep "GET" /var/log/squid/access.log | wc -l</code> - Cuenta el n√∫mero de solicitudes GET realizadas.</li>
        </ul>
      
        <p>El comando <code>grep</code> permite realizar b√∫squedas detalladas en los logs, lo que facilita la identificaci√≥n de problemas espec√≠ficos y patrones en el tr√°fico.</p>
      
        <h3>üî® Instalaci√≥n y uso de SARG</h3>
        <p>SARG (Squid Analysis Report Generator) es una herramienta que permite generar informes visuales a partir de los logs de Squid, facilitando la interpretaci√≥n de los mismos.</p>
      
        <h4>üõ†Ô∏è Instalaci√≥n de SARG</h4>
        <p>Para instalar SARG en un sistema basado en Debian/Ubuntu:</p>
        <pre>
      # Actualizar los repositorios
      sudo apt update
      
      # Instalar SARG
      sudo apt install sarg
        </pre>
      
        <h4>üìä Configuraci√≥n b√°sica de SARG</h4>
        <p>Despu√©s de la instalaci√≥n, puedes configurar SARG editando su archivo de configuraci√≥n, que generalmente se encuentra en <code>/etc/sarg/sarg.conf</code>.</p>
        <pre>
      # Editar el archivo de configuraci√≥n
      sudo nano /etc/sarg/sarg.conf
      
      # Aqu√≠ puedes configurar rutas de logs, reportes, etc.
        </pre>
      
        <h4>‚ñ∂Ô∏è Generar un informe con SARG</h4>
        <p>Una vez configurado SARG, para generar un informe a partir de los logs de Squid, ejecuta el siguiente comando:</p>
        <pre>
      sudo sarg
        </pre>
      
        <p>Esto crear√° un informe visual en formato HTML que puedes abrir con cualquier navegador web. El informe incluye detalles sobre las p√°ginas visitadas, el tr√°fico generado y las horas de acceso.</p>
      
        <h4>üìà Ver los informes de SARG</h4>
        <p>Los informes generados por SARG se suelen almacenar en el directorio <code>/var/www/sarg</code> o en la ruta que hayas configurado en el archivo de configuraci√≥n.</p>
      
        <h3>üìë Conclusi√≥n</h3>
        <p>El uso de <code>grep</code> y herramientas como <strong>SARG</strong> hace que el an√°lisis de los logs de Squid sea m√°s accesible y eficaz, proporcionando una forma sencilla de interpretar el tr√°fico y detectar posibles problemas.</p>

    </section>


    </main>

    <footer>
      <p style="font-family: 'CCSymbols', sans-serif; font-size:larger;" >
        2025 - Llic√®ncia: &#x1F16D; &#x1F16F; &#x1F10E; &#x1F10F; - UD5 - Proxy
      </p>
    </footer>
  </div>

 

  <script src="scriptsunitats.js"></script>
</body>
</html>
